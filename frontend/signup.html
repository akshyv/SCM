<html lang="en">
    <head>
        <link rel="stylesheet" href="./template/static/css/login.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>        
    </head>
    <body style="background: url('https://windows10spotlight.com/wp-content/uploads/2019/12/d036fe1c3c929adfe34516b37f69047b-1024x576.jpg '); background-repeat:no-repeat; background-size: cover;">

            <div class ="login-form">
                <div class ="form-title">Sign Up</div>
                <div class ="form-input">
                    <label for="username">Username</label>
                    <input type="text" id ="typeUserName" placeholder="Username" required spellcheck="false">
                </div>
                    <div class ="form-input">
                    <label for="password">Password</label>
                    <input type="password" id ="typePasswordX" placeholder="Password" required>
                </div>
                <div class="form-input">
                    <button id="login-btn" onclick="signUpData()">Sign Up</button>                    
                </div>
                <a href="index.html">Already have an account ?</a>
            </div>
    <script>
      function signUpData(){
        let userName = document.querySelector("#typeUserName").value
        let passWord = document.querySelector("#typePasswordX").value
        var re = new RegExp("(?=^.{8,}$)((?=.*\d)|(?=.*))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$");
        if (re.test(passWord)) {
          $.ajax({
          url:"http://localhost:8000/sign_up",
          type:"POST",
          contentType:"application/json",
          data:JSON.stringify({
            username:userName,
            password:passWord
          }),
          success:function(data) {
            window.location.href = "http://127.0.0.1:5501";
            return(data)
          },
          error: function(xhr, ajaxOptions, thrownError){
            alert ("User with this name already exist")
          }
        })            
        } else {
          alert("Invalid Pattern for password")
        }
    }
    </script>
  </body>
</html>